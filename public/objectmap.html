<!DOCTYPE html>
<html>
	<head>

		<title>SANDBOX</title>
			
		<script type="text/javascript" src="lib/jquery-1.8.2.js" ></script>  

	<style>
	
		body {
			background-color: #333;
		}
		
		
		#map {
				width: 100%;
				height:100%;
				position: relative;
				float: left;
				display: block;
		}
		
		.image {
			width: 100px;
			height: 100px;
			position: relative;
			float: left;
			background-size: 100px;
		}
		
		#preview {
			position:absolute;
			margin-left: 20%;
			margin-right: 20%;		
			width:5px;
			height: 5px;
		}
		
		#preview.active {
			margin-top: 2%;
			width: 60%;
			height: 90%;
			background-repeat: no-repeat;
			background-size: auto;
			background-position: center;
		}
	
	</style>
	</head>
	
	<body>
		<div id="map"></div>
		<div id="preview"></div>
	
	<script>
		var i = 0;
		var images = [];
		getMoreArt();
		$("#preview").css("opacity", 0);
		$("#preview").on("click", function() {
			$(this).animate({opacity: 0}, 500, function() {
				$(this).removeClass("active");
				$("#map").css("opacity", 1);
			});
			
		

		});
	
		function getMoreArt() {
			$.get("http://api.harvardartmuseums.org/object?hasImage=1&sort=random&fields=primaryimageurl&apikey=83cb5d60-e29e-11e3-8aa2-6f2d47dd4045&size=100", function(data) {
				$.each(data.records, function(j, art) {
					if(art.primaryimageurl) images.push(art.primaryimageurl);
				});
				i++;
				if(i < 1) getMoreArt();
				else populateMap();
			});	
		}
		
		function populateMap() {
			$.each(images, function(j, val) {
				var $div = $("<div class='image'></div>");
				$div.css("background-image", "url('"+val+"')");
				$("#map").append($div);
			});
			
			$(".image").on("click", function(e) {
				console.log(this);
				$("#preview").css("background-image", "url('"+images[$(e.target).index()]+"')");
				$("#map").css("opacity", .1);
				$("#preview").addClass("active");
				$("#preview").animate({opacity: 1}, 500, function() {
				
				});

			});
		}
		

	
	</script>
	</body>
</html>